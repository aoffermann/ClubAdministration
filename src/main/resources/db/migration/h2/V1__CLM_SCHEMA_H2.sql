CREATE SEQUENCE USER_SEQ START WITH 1000 INCREMENT BY 1;
CREATE SEQUENCE MEMBER_SEQ START WITH 1000 INCREMENT BY 1;
CREATE SEQUENCE ADDRESS_SEQ START WITH 1000 INCREMENT BY 1;

CREATE TABLE REVINFO (
	REV 				INTEGER				GENERATED BY DEFAULT AS IDENTITY,
 	REVTSTMP			BIGINT				,
	PRIMARY KEY (REV)
);

CREATE TABLE USER (
	USER_ID 			BIGINT 				NOT NULL,
    USER_NAME 			VARCHAR2(255) 		NOT NULL,
    PASSWORD			VARCHAR2(255)		NOT NULL,
    PRIMARY KEY (USER_ID)
);

CREATE TABLE MEMBER (
	MEMBER_ID 			BIGINT 				NOT NULL,
    NAME    			VARCHAR2(255) 		NOT NULL,
    FIRST_NAME          VARCHAR2(255) 		NOT NULL,
    NATIONALITY         VARCHAR2(3)         NOT NULL,
    BIRTHDAY            DATE                NOT NULL,
    PHONE               VARCHAR2(20)        ,
    MOBILE_PHONE        VARCHAR2(20)        ,
    MAIL                VARCHAR2(255) 		,
    ADDRESS_ID 			BIGINT 				NOT NULL,
    PRIMARY KEY (MEMBER_ID)
);

CREATE TABLE ADDRESS (
	ADDRESS_ID 			BIGINT 				NOT NULL,
	STREET    			VARCHAR2(255) 		NOT NULL,
	POSTCODE    		VARCHAR2(10) 		NOT NULL,
	LOCATION   			VARCHAR2(255) 		NOT NULL,
	COUNTRY   			VARCHAR2(255) 		NOT NULL,
	PRIMARY KEY (ADDRESS_ID)
);

CREATE TABLE USER_AUD (
	USER_ID 			BIGINT 				NOT NULL,
    USER_NAME 			VARCHAR2(255) 		,
    PASSWORD			VARCHAR2(255)		,
    REV					INTEGER				NOT NULL,
    REVTYPE				TINYINT				,
    PRIMARY KEY (USER_ID, REV)
);

CREATE TABLE MEMBER_AUD (
	MEMBER_ID 			BIGINT 				NOT NULL,
    NAME    			VARCHAR2(255) 		,
    FIRST_NAME          VARCHAR2(255) 		,
    NATIONALITY         VARCHAR2(3)         ,
    BIRTHDAY            DATE                ,
    PHONE               VARCHAR2(20)        ,
    MOBILE_PHONE        VARCHAR2(20)        ,
    MAIL                VARCHAR2(255) 		,
    ADDRESS_ID 			BIGINT 				,
    REV					INTEGER				NOT NULL,
    REVTYPE				TINYINT				,
    PRIMARY KEY (MEMBER_ID, REV)
);

CREATE TABLE ADDRESS_AUD (
	ADDRESS_ID 			BIGINT 				NOT NULL,
	STREET    			VARCHAR2(255) 		,
	POSTCODE    		VARCHAR2(10) 		,
	LOCATION   			VARCHAR2(255) 		,
	COUNTRY   			VARCHAR2(255) 		,
    REV					INTEGER				NOT NULL,
    REVTYPE				TINYINT				,
	PRIMARY KEY (ADDRESS_ID, REV)
);

ALTER TABLE USER_AUD ADD CONSTRAINT FK_USER_AUD_REVINFO FOREIGN KEY (REV) REFERENCES REVINFO;
ALTER TABLE MEMBER_AUD ADD CONSTRAINT FK_MEMBER_AUD_REVINFO FOREIGN KEY (REV) REFERENCES REVINFO;
ALTER TABLE ADDRESS_AUD ADD CONSTRAINT FK_ADDRESS_AUD_REVINFO FOREIGN KEY (REV) REFERENCES REVINFO;
ALTER TABLE MEMBER ADD CONSTRAINT FK_MEMBER_ADDRESS FOREIGN KEY (ADDRESS_ID) REFERENCES MEMBER;